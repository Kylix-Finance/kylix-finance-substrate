<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="! # The Lending pallet of Kylix ! ! ## Overview ! ! The Lending pallet is responsible for managing the lending pools and the treasury operations. ! ! The lending pallet adopts a protocol similar to Compound V2 for its lending operations, ! offering a pool-based approach to aggregate assets from all users. ! ! Interest rates adjust dynamically in response to the supply and demand conditions. ! Additionally, for every lending positions a new token is minted, thus enabling the transfer of ! ownership. ! ! Implemented Extrinsics: ! ! 0. create_lending_pool() ! 1. activate_lending_pool() ! 2. supply() ! 3. withdraw() ! 4. borrow() ! 5. repay() ! 6. claim_rewards() ! 7. deactivate_lending_pool() ! 8. update_pool_rate_model() ! 9. update_pool_kink() !"><title>lending::storage - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-5ca6ca2a1f83705a.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="lending" data-themes="" data-resource-suffix="" data-rustdoc-version="1.82.0-nightly (cefe1dcef 2024-07-22)" data-channel="nightly" data-search-js="search-d234aafac6c221dd.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../static.files/storage-118b08c4c78b968e.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../static.files/main-d2fab2bf619172d3.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-df360f571f6edeae.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../lending/index.html">lending</a><span class="version">4.0.0-dev</span></h2></div><h2 class="location"><a href="#">Module storage</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#traits">Traits</a></li><li><a href="#functions">Functions</a></li></ul></section><h2><a href="../index.html">In crate lending</a></h2></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../index.html">lending</a>::<wbr><a class="mod" href="#">storage</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>! # The Lending pallet of Kylix
!
! ## Overview
!
! The Lending pallet is responsible for managing the lending pools and the treasury
operations. !
! The lending pallet adopts a protocol similar to Compound V2 for its lending operations,
! offering a pool-based approach to aggregate assets from all users.
!
! Interest rates adjust dynamically in response to the supply and demand conditions.
! Additionally, for every lending positions a new token is minted, thus enabling the
transfer of ! ownership.
!
! Implemented Extrinsics:
!
! 0. create_lending_pool()
! 1. activate_lending_pool()
! 2. supply()
! 3. withdraw()
! 4. borrow()
! 5. repay()
! 6. claim_rewards()
! 7. deactivate_lending_pool()
! 8. update_pool_rate_model()
! 9. update_pool_kink()
!</p>
<p>TODO:</p>
<ol>
<li>rename the pallet to <code>lending</code> and the module to <code>lending</code></li>
<li>implement the <code>ManagerOrigin</code> type for reserve pool special operations</li>
<li>implement tests for the lending logic</li>
<li>implement the <code>WeightInfo</code> trait for the pallet</li>
</ol>
<p>! Use case
Stuff to do with the runtime’s storage.</p>
</div></details><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="bounded_btree_map/index.html" title="mod lending::storage::bounded_btree_map">bounded_btree_map</a></div><div class="desc docblock-short">Traits, types and structs to support a bounded BTreeMap.</div></li><li><div class="item-name"><a class="mod" href="bounded_btree_set/index.html" title="mod lending::storage::bounded_btree_set">bounded_btree_set</a></div><div class="desc docblock-short">Traits, types and structs to support a bounded <code>BTreeSet</code>.</div></li><li><div class="item-name"><a class="mod" href="bounded_vec/index.html" title="mod lending::storage::bounded_vec">bounded_vec</a></div><div class="desc docblock-short">Traits, types and structs to support putting a bounded vector into storage, as a raw value, map
or a double map.</div></li><li><div class="item-name"><a class="mod" href="child/index.html" title="mod lending::storage::child">child</a></div><div class="desc docblock-short">Operation on runtime child storages.</div></li><li><div class="item-name"><a class="mod" href="hashed/index.html" title="mod lending::storage::hashed">hashed</a></div><div class="desc docblock-short">Operation on runtime storage using hashed keys.</div></li><li><div class="item-name"><a class="mod" href="migration/index.html" title="mod lending::storage::migration">migration</a></div><div class="desc docblock-short">Some utilities for helping access storage with arbitrary key types.</div></li><li><div class="item-name"><a class="mod" href="storage_noop_guard/index.html" title="mod lending::storage::storage_noop_guard">storage_noop_guard</a></div><div class="desc docblock-short">Contains the <a href="storage_noop_guard/struct.StorageNoopGuard.html" title="struct lending::storage::storage_noop_guard::StorageNoopGuard"><code>crate::StorageNoopGuard</code></a> for conveniently asserting
that no storage mutation has been made by a whole code block.</div></li><li><div class="item-name"><a class="mod" href="transactional/index.html" title="mod lending::storage::transactional">transactional</a></div><div class="desc docblock-short">Provides functionality around the transaction storage.</div></li><li><div class="item-name"><a class="mod" href="types/index.html" title="mod lending::storage::types">types</a></div><div class="desc docblock-short">Storage types to build abstraction on storage, they implements storage traits such as
StorageMap and others.</div></li><li><div class="item-name"><a class="mod" href="unhashed/index.html" title="mod lending::storage::unhashed">unhashed</a></div><div class="desc docblock-short">Operation on unhashed runtime storage.</div></li><li><div class="item-name"><a class="mod" href="weak_bounded_vec/index.html" title="mod lending::storage::weak_bounded_vec">weak_bounded_vec</a></div><div class="desc docblock-short">Traits, types and structs to support putting a bounded vector into storage, as a raw value, map
or a double map.</div></li></ul><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.ChildTriePrefixIterator.html" title="struct lending::storage::ChildTriePrefixIterator">ChildTriePrefixIterator</a></div><div class="desc docblock-short">Iterate over a prefix of a child trie and decode raw_key and raw_value into <code>T</code>.</div></li><li><div class="item-name"><a class="struct" href="struct.Key.html" title="struct lending::storage::Key">Key</a></div><div class="desc docblock-short">A type used exclusively by storage maps as their key type.</div></li><li><div class="item-name"><a class="struct" href="struct.KeyLenOf.html" title="struct lending::storage::KeyLenOf">KeyLenOf</a></div><div class="desc docblock-short">Utility type for converting a storage map into a <code>Get&lt;u32&gt;</code> impl which returns the maximum
key size.</div></li><li><div class="item-name"><a class="struct" href="struct.KeyPrefixIterator.html" title="struct lending::storage::KeyPrefixIterator">KeyPrefixIterator</a></div><div class="desc docblock-short">Iterate over a prefix and decode raw_key into <code>T</code>.</div></li><li><div class="item-name"><a class="struct" href="struct.PrefixIterator.html" title="struct lending::storage::PrefixIterator">PrefixIterator</a></div><div class="desc docblock-short">Iterate or drain over a prefix and decode raw_key and raw_value into <code>T</code>.</div></li></ul><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.TransactionOutcome.html" title="enum lending::storage::TransactionOutcome">TransactionOutcome</a></div><div class="desc docblock-short">Describes on what should happen with a storage transaction.</div></li></ul><h2 id="traits" class="section-header">Traits<a href="#traits" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="trait" href="trait.IterableStorageDoubleMap.html" title="trait lending::storage::IterableStorageDoubleMap">IterableStorageDoubleMap</a></div><div class="desc docblock-short">A strongly-typed double map in storage whose secondary keys and values can be iterated over.</div></li><li><div class="item-name"><a class="trait" href="trait.IterableStorageMap.html" title="trait lending::storage::IterableStorageMap">IterableStorageMap</a></div><div class="desc docblock-short">A strongly-typed map in storage whose keys and values can be iterated over.</div></li><li><div class="item-name"><a class="trait" href="trait.IterableStorageNMap.html" title="trait lending::storage::IterableStorageNMap">IterableStorageNMap</a></div><div class="desc docblock-short">A strongly-typed map with arbitrary number of keys in storage whose keys and values can be
iterated over.</div></li><li><div class="item-name"><a class="trait" href="trait.PrefixIteratorOnRemoval.html" title="trait lending::storage::PrefixIteratorOnRemoval">PrefixIteratorOnRemoval</a></div><div class="desc docblock-short">Trait for specialising on removal logic of <a href="struct.PrefixIterator.html" title="struct lending::storage::PrefixIterator"><code>PrefixIterator</code></a>.</div></li><li><div class="item-name"><a class="trait" href="trait.StorageAppend.html" title="trait lending::storage::StorageAppend">StorageAppend</a></div><div class="desc docblock-short">Marker trait that will be implemented for types that support the <code>storage::append</code> api.</div></li><li><div class="item-name"><a class="trait" href="trait.StorageDecodeLength.html" title="trait lending::storage::StorageDecodeLength">StorageDecodeLength</a></div><div class="desc docblock-short">Marker trait that will be implemented for types that support to decode their length in an
efficient way. It is expected that the length is at the beginning of the encoded object
and that the length is a <code>Compact&lt;u32&gt;</code>.</div></li><li><div class="item-name"><a class="trait" href="trait.StorageDoubleMap.html" title="trait lending::storage::StorageDoubleMap">StorageDoubleMap</a></div><div class="desc docblock-short">An implementation of a map with a two keys.</div></li><li><div class="item-name"><a class="trait" href="trait.StorageEntryMetadataBuilder.html" title="trait lending::storage::StorageEntryMetadataBuilder">StorageEntryMetadataBuilder</a></div><div class="desc docblock-short">Build the metadata of a storage.</div></li><li><div class="item-name"><a class="trait" href="trait.StorageMap.html" title="trait lending::storage::StorageMap">StorageMap</a></div><div class="desc docblock-short">A strongly-typed map in storage.</div></li><li><div class="item-name"><a class="trait" href="trait.StorageNMap.html" title="trait lending::storage::StorageNMap">StorageNMap</a></div><div class="desc docblock-short">An implementation of a map with an arbitrary number of keys.</div></li><li><div class="item-name"><a class="trait" href="trait.StoragePrefixedMap.html" title="trait lending::storage::StoragePrefixedMap">StoragePrefixedMap</a></div><div class="desc docblock-short">Trait for maps that store all its value after a unique prefix.</div></li><li><div class="item-name"><a class="trait" href="trait.StorageStreamIter.html" title="trait lending::storage::StorageStreamIter">StorageStreamIter</a></div><div class="desc docblock-short">An iterator that streams values directly from storage.</div></li><li><div class="item-name"><a class="trait" href="trait.StorageTryAppend.html" title="trait lending::storage::StorageTryAppend">StorageTryAppend</a></div><div class="desc docblock-short">Marker trait that is implemented for types that support the <code>storage::append</code> api with a limit
on the number of element.</div></li><li><div class="item-name"><a class="trait" href="trait.StorageValue.html" title="trait lending::storage::StorageValue">StorageValue</a></div><div class="desc docblock-short">A trait for working with macro-generated storage values under the substrate storage API.</div></li><li><div class="item-name"><a class="trait" href="trait.TryAppendDoubleMap.html" title="trait lending::storage::TryAppendDoubleMap">TryAppendDoubleMap</a></div><div class="desc docblock-short">Storage double map that is capable of <a href="trait.StorageTryAppend.html" title="trait lending::storage::StorageTryAppend"><code>StorageTryAppend</code></a>.</div></li><li><div class="item-name"><a class="trait" href="trait.TryAppendMap.html" title="trait lending::storage::TryAppendMap">TryAppendMap</a></div><div class="desc docblock-short">Storage map that is capable of <a href="trait.StorageTryAppend.html" title="trait lending::storage::StorageTryAppend"><code>StorageTryAppend</code></a>.</div></li><li><div class="item-name"><a class="trait" href="trait.TryAppendValue.html" title="trait lending::storage::TryAppendValue">TryAppendValue</a></div><div class="desc docblock-short">Storage value that is capable of <a href="trait.StorageTryAppend.html" title="trait lending::storage::StorageTryAppend"><code>StorageTryAppend</code></a>.</div></li></ul><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.in_storage_layer.html" title="fn lending::storage::in_storage_layer">in_storage_layer</a></div><div class="desc docblock-short">Execute the supplied function, ensuring we are at least in one storage layer.</div></li><li><div class="item-name"><a class="fn" href="fn.storage_prefix.html" title="fn lending::storage::storage_prefix">storage_prefix</a></div><div class="desc docblock-short">Returns the storage prefix for a specific pallet name and storage name.</div></li><li><div class="item-name"><a class="fn" href="fn.with_storage_layer.html" title="fn lending::storage::with_storage_layer">with_storage_layer</a></div><div class="desc docblock-short">Execute the supplied function, adding a new storage layer.</div></li><li><div class="item-name"><a class="fn" href="fn.with_transaction.html" title="fn lending::storage::with_transaction">with_transaction</a></div><div class="desc docblock-short">Execute the supplied function in a new storage transaction.</div></li><li><div class="item-name"><a class="fn" href="fn.with_transaction_unchecked.html" title="fn lending::storage::with_transaction_unchecked">with_transaction_unchecked</a></div><div class="desc docblock-short">Same as <a href="fn.with_transaction.html" title="fn lending::storage::with_transaction"><code>with_transaction</code></a> but without a limit check on nested transactional layers.</div></li></ul></section></div></main></body></html>